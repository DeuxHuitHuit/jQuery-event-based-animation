/*! jQuery Event Based Animation - v1.0.0 - 2012-08-14
* https://github.com/DeuxHuitHuit/jQuery-event-based-animation
* Copyright (c) 2012 Deux Huit Huit; Licensed MIT */
(function(a,b){"use strict",a.fn.eventAnimate=function(b){var c=a(this),d=a(window),e=function(){return(new Date).getTime()},f=function(a,b){return!a||!b?0:a/b},g=e(),h=g,i={x:0,y:0},j={x:0,y:0},k={x:0,y:0},l={x:0,y:0},m={x:0,y:0},n=function(a,b){var c=window,d=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame||c.oRequestAnimationFrame||c.setTimeout;return d(a,b)},o=function(a){var b=window,c=b.cancelAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||b.clearTimeout;return c(a)},p=null,q={left:0,top:0},r=function(a,b,c){c.x=b.container.scrollLeft(),c.y=b.container.scrollTop()},s=function(a,b,c){var d=b.container.offset()||q;c.x=a.pageX-d.left,c.y=a.pageY-d.top},t=function(a,b,c){var d=b.container.offset()||q,e=a.originalEvent.touches[0];c.x=e.pageX-d.left,c.y=e.pageY-d.top},u={scroll:r,click:s,mouseover:s,mousemove:s,touchmove:t},v=function(b){var d=u[B.event];a.isFunction(d)?(d.call(c,b,B,k),g=e()-1,A()):!window.console||console.err('No strategy found for event "'+B.event+'"')},w=function(){return z(0)?(o(p),p=null):p=n(A,B.tick),p},x=function(b,d){if(!a.isFunction(b.duration))return{x:b.durationX||b.duration,y:b.durationY||b.duration};var e=b.duration.call(c,b,d);return{x:Math.abs(e.x),y:Math.abs(e.y)}},y=function(a){return{x:j.x+Math.min(1,f(a,i.x))*(k.x-j.x),y:j.y+Math.min(1,f(a,i.y))*(k.y-j.y)}},z=function(b){return a.isFunction(b.stop)?b.stop():!!b},A=function(){if(!z(0)){l.x=k.x-m.x,l.y=k.y-m.y;if(l.x!==0||l.y!==0){g>h&&(i=x(B,l),j.x=m.x,j.y=m.y,h=e());var b=e()-h,d=y(b),f=B.easing||a.easing.def||"linear",n={x:a.easing[f](d.x,Math.min(b,i.x),j.x,k.x-j.x,i.x),y:a.easing[f](d.y,Math.min(b,i.y),j.y,k.y-j.y,i.y)};!!B.debug&&!!window.console&&console.log(h+" Target "+k.y+" - Start "+parseInt(j.y,10)+" - Linear "+parseInt(d.y,10)+" - Eased "+parseInt(n.y,10)+" - Time "+Math.min(b,i.y)+" - Duration "+i.y),m=n,b<i.x||b<i.y?w():p=null,a.isFunction(B.step)&&B.step.call(c,b,m),p===null&&a.isFunction(B.complete)&&B.complete.call(c)}}else p=null},B=a.extend({container:null,tick:16,event:"scroll",durationX:null,durationY:null,duration:0,stop:null,step:null,complete:null,easing:null,strategy:null,debug:!1},b);B.container=a(B.container||c),a.isFunction(B.strategy)&&(u[B.event]=B.strategy),B.container.on(B.event,v),w()}})(jQuery);