/*! jQuery Event Based Animation - v1.0.0 - 2012-11-30
* https://github.com/DeuxHuitHuit/jQuery-event-based-animation
* Copyright (c) 2012 Deux Huit Huit; Licensed MIT */
(function(a,b){"use strict",a.fn.eventAnimate=function(b){var c=a(this),d=a(window),e=function(){return(new Date).getTime()},f=function(a,b){return!a||!b?0:a/b},g=e(),h=g,i={x:0,y:0},j={x:0,y:0},k={x:0,y:0},l={x:0,y:0},m={x:0,y:0},n=function(a,b){var c=window,d=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame||c.oRequestAnimationFrame||c.setTimeout;return d(a,b)},o=function(a){var b=window,c=b.cancelAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||b.clearTimeout;return c(a)},p=null,q=!1,r={left:0,top:0},s=function(a,b,c){c.x=b.container.scrollLeft(),c.y=b.container.scrollTop()},t=function(a,b,c){var d=b.container.offset()||r;c.x=a.pageX-d.left,c.y=a.pageY-d.top},u=function(a,b,c){var d=b.container.offset()||r,e=a.originalEvent.touches[0];c.x=e.pageX-d.left,c.y=e.pageY-d.top},v={scroll:s,click:t,mouseover:t,mousemove:t,touchmove:u},w=function(b){var d=v[C.event];a.isFunction(d)?(d.call(c,b,C,k),g=e()-1,B()):!window.console||console.err('No strategy found for event "'+C.event+'"')},x=function(){return A(0)?(o(p),p=null):p=n(B,C.tick),p},y=function(b,d){if(!a.isFunction(b.duration))return{x:b.duration.x||b.duration||1,y:b.duration.y||b.duration||1};var e=b.duration.call(c,b,d);return{x:Math.abs(e.x||e||1),y:Math.abs(e.y||e||1)}},z=function(a){return{x:j.x+Math.min(1,f(a,i.x))*(k.x-j.x),y:j.y+Math.min(1,f(a,i.y))*(k.y-j.y)}},A=function(b){return a.isFunction(b.stop)?b.stop(b):!!b.stop},B=function(){if(!A(0)){l.x=k.x-m.x,l.y=k.y-m.y;if(l.x!==0||l.y!==0){g>h&&(i=y(C,l),j.x=m.x,j.y=m.y,h=e());var b=e()-h,d=z(b),f=C.easing||a.easing.def||"linear",n={x:a.easing[f](d.x,Math.min(b,i.x),j.x,k.x-j.x,i.x),y:a.easing[f](d.y,Math.min(b,i.y),j.y,k.y-j.y,i.y)};!!C.debug&&!!window.console&&console.log(h+" Target "+k.y+" - Start "+parseInt(j.y,10)+" - Linear "+parseInt(d.y,10)+" - Eased "+parseInt(n.y,10)+" - Time "+Math.min(b,i.y)+" - Duration "+i.y),m=n,q=!0,!q&&a.isFunction(C.start)&&C.start.call(c,b,m),b<i.x||b<i.y?x():(p=null,q=!1),a.isFunction(C.step)&&C.step.call(c,b,m),p===null&&a.isFunction(C.complete)&&C.complete.call(c,b,m)}}else p=null,q=!1},C=a.extend({container:null,tick:16,event:"scroll",duration:0,stop:null,step:null,complete:null,start:null,easing:null,strategy:null,debug:!1},b);C.container=a(C.container||c),a.isFunction(C.strategy)?v[C.event]=C.strategy:a.type(C.strategy)=="string"&&(v[C.event]=v[C.strategy]),C.container.on(C.event,w),x()}})(jQuery);