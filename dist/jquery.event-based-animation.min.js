/*! jQuery Event Based Animation - v1.0.0 - 2012-12-12
* https://github.com/DeuxHuitHuit/jQuery-event-based-animation
* Copyright (c) 2012 Deux Huit Huit; Licensed MIT */
(function(a,b){"use strict",a.fn.eventAnimate=function(b){var c=a(this),d=a(window),e=function(){return(new Date).getTime()},f=function(a,b){return!a||!b?0:a/b},g=e(),h=g,i={x:0,y:0},j={x:0,y:0},k={x:0,y:0},l={x:0,y:0},m={x:0,y:0},n=function(a,b){var c=window,d=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame||c.oRequestAnimationFrame||c.setTimeout;return d(a,d===c.setTimeout?b:D.container.get(0))},o=function(a){var b=window,c=b.cancelAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||b.clearTimeout;return c(a)},p=null,q=!1,r={left:0,top:0},s=function(a,b,c){c.x=b.container.scrollLeft(),c.y=b.container.scrollTop()},t=function(a,b,c){var d=b.container.offset()||r;c.x=a.pageX-d.left,c.y=a.pageY-d.top},u=function(a,b,c){var d=b.container.offset()||r,e=a.originalEvent.touches[0];c.x=e.pageX-d.left,c.y=e.pageY-d.top},v={scroll:s,click:t,mouseover:t,mousemove:t,touchmove:u},w=function(b){var d=v[D.event];if(a.isFunction(d)){d.call(c,b,D,k);if(!q||!!D.restartOnEvent)g=e()-1,D.delayStart?x():C()}else!window.console||console.err('No strategy found for event "'+D.event+'"')},x=function(){return B(D)?(o(p),p=null):p=n(C,D.tick),p},y=function(b,d,e,f){if(!a.isFunction(b.duration))return{x:(b.duration.x||b.duration||Math.abs(d.x))*b.durationRatio,y:(b.duration.y||b.duration||Math.abs(d.y))*b.durationRatio};var g=b.duration.call(c,b,d);return{x:Math.abs(g.x||g||d.x)*b.durationRatio,y:Math.abs(g.y||g||d.y)*b.durationRatio}},z=function(b){var c=null;return a.isFunction(b.startValues)&&(c=b.startValues(b)),c||(c=m),c},A=function(a){return{x:j.x+Math.min(1,f(a,i.x))*(k.x-j.x),y:j.y+Math.min(1,f(a,i.y))*(k.y-j.y)}},B=function(b){return a.isFunction(b.stop)?b.stop(b):!1},C=function(){if(!B(D)){l.x=k.x-m.x,l.y=k.y-m.y;if(l.x!==0||l.y!==0){if(g>h){var b=z(D);l.x=k.x-b.x,l.y=k.y-b.y,i=y(D,l,b,k),j=b;if(!q||!!D.restartOnEvent)h=e()}var d=e()-h,f=A(d),n=D.easing||a.easing.def||"linear",o={x:a.easing[n](f.x,Math.min(d,i.x),j.x,k.x-j.x,i.x),y:a.easing[n](f.y,Math.min(d,i.y),j.y,k.y-j.y,i.y)};!!window.console&&!!D.debug&&((D.debug===!0||D.debug.x===!0)&&console.log(h+" Target X "+parseInt(k.x,10)+" - Start "+parseInt(j.x,10)+" - Linear "+parseInt(f.x,10)+" - Eased "+parseInt(o.x,10)+" - Time "+Math.min(d,i.x)+" - Duration "+i.x),(D.debug===!0||D.debug.y===!0)&&console.log(h+" Target Y "+parseInt(k.y,10)+" - Start "+parseInt(j.y,10)+" - Linear "+parseInt(f.y,10)+" - Eased "+parseInt(o.y,10)+" - Time "+Math.min(d,i.y)+" - Duration "+i.y)),m=o,!q&&a.isFunction(D.start)&&D.start.call(c,d,m),q=!0,d<i.x||d<i.y?x():(p=null,q=!1),a.isFunction(D.step)&&D.step.call(c,d,m),p===null&&(a.isFunction(D.complete)&&D.complete.call(c,d,m),m=z(D))}}else p=null,q=!1},D=a.extend({container:null,tick:16,event:"scroll",delayStart:!1,duration:0,durationRatio:1,restartOnEvent:!1,stop:null,step:null,complete:null,start:null,easing:null,strategy:null,startValues:null,debug:!1},b);D.container=a(D.container||c),a.isFunction(D.strategy)?v[D.event]=D.strategy:a.type(D.strategy)=="string"&&(v[D.event]=v[D.strategy]),D.container.on(D.event,w)}})(jQuery);