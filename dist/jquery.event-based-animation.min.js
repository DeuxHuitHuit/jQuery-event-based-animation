/*! jQuery Event Based Animation - v1.0.0 - 2012-08-14
* https://github.com/DeuxHuitHuit/jQuery-event-based-animation
* Copyright (c) 2012 Deux Huit Huit; Licensed MIT */
(function(a,b){"use strict",a.fn.eventAnimate=function(b){var c=a(this),d=a(window),e=function(){return(new Date).getTime()},f=e(),g=f,h={x:0,y:0},i={x:0,y:0},j={x:0,y:0},k={x:0,y:0},l={x:0,y:0},m={x:0,y:0},n={x:0,y:0},o=function(a,b){var c=window,d=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame||c.oRequestAnimationFrame||c.setTimeout;return d(a,b)},p=function(a){var b=window,c=b.cancelAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||b.clearTimeout;return c(a)},q=null,r=function(a){l.x=c.scrollLeft(),l.y=c.scrollTop(),f=e()-1,console.log("New target "+l.y),w()},s=function(){return v(0)?(p(q),q=null):q=o(w,x.tick),q},t=function(b,c){if(!a.isFunction(b.durationCallback))return{x:b.durationX,y:b.durationY};var d=b.durationCallback(c);return{x:Math.abs(d.x),y:Math.abs(d.y)}},u=function(){var a={x:n.x+i.x*h.x,y:n.y+i.y*h.y};return Math.abs(a.x-l.x)<h.x&&(a.x=l.x),Math.abs(a.y-l.y)<h.y&&(a.y=l.y),a},v=function(b){return a.isFunction(b.stop)?b.stop():!!b},w=function(){if(!v(0)){m.x=l.x-n.x,m.y=l.y-n.y;if(m.x!==0||m.y!==0){if(f>g){j=t(x,m);var b=Math.ceil(a.sdiv(j.x,x.tick)),d=Math.ceil(a.sdiv(j.y,x.tick));h.x=Math.abs(a.sdiv(m.x,b)),h.y=Math.abs(a.sdiv(m.y,d)),k.x=n.x,k.y=n.y,i.x=m.x<0?-1:m.x>0?1:0,i.y=m.y<0?-1:m.y>0?1:0,g=e()}var o=e()-g,p=u(),r=x.easing||a.easing.def||"linear",w={x:a.easing[r](p.x,Math.min(o,j.x),k.x,l.x-k.x,j.x),y:a.easing[r](p.y,Math.min(o,j.y),k.y,l.y-k.y,j.y)};console.log(g+" Target "+l.y+" - Start "+parseInt(k.y,10)+" - Eased "+parseInt(w.y,10)+" - Time "+Math.min(o,j.y)+" - Duration "+j.y),n.y=w.y,o<j.x||o<j.y?s():q=null,a.isFunction(x.tickCallback)&&x.tickCallback.call(c,o,n)}}else q=null},x=a.extend({container:a(window),tick:16,durationX:500,durationY:500,durationCallback:null,stop:null,tickCallback:null,easing:null},b);x.container=a(x.container),x.container.scroll(r),s()}})(jQuery);