/*! jQuery Event Based Animation - v1.0.0 - 2012-08-14
* https://github.com/DeuxHuitHuit/jQuery-event-based-animation
* Copyright (c) 2012 Deux Huit Huit; Licensed MIT */
(function(a,b){"use strict",a.fn.eventAnimate=function(b){var c=a(this),d=a(window),e=function(){return(new Date).getTime()},f=e(),g=f,h={x:0,y:0},i={x:0,y:0},j={x:0,y:0},k={x:0,y:0},l={x:0,y:0},m=function(a,b){var c=window,d=c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame||c.oRequestAnimationFrame||c.setTimeout;return d(a,b)},n=function(a){var b=window,c=b.cancelAnimationFrame||b.webkitCancelRequestAnimationFrame||b.mozCancelRequestAnimationFrame||b.oCancelRequestAnimationFrame||b.msCancelRequestAnimationFrame||b.clearTimeout;return c(a)},o=null,p={left:0,top:0},q=function(a,b,c){var d=b.container.offset()||p;c.x=b.container.scrollLeft()-d.left,c.y=b.container.scrollTop()-d.top},r=function(a,b,c){var d=b.container.offset()||p;c.x=a.pageX-d.left,c.y=a.pageY-d.top},s=function(a,b,c){var d=b.container.offset()||p,e=a.originalEvent.touches[0];c.x=e.pageX-d.left,c.y=e.pageY-d.top},t={scroll:q,click:r,mouseover:r,touchmove:s},u=function(a){t[A.event].call(c,a,A,j),f=e()-1,z()},v=function(){return y(0)?(n(o),o=null):o=m(z,A.tick),o},w=function(b,d){if(!a.isFunction(b.duration))return{x:b.durationX||b.duration,y:b.durationY||b.duration};var e=b.duration.call(c,b,d);return{x:Math.abs(e.x),y:Math.abs(e.y)}},x=function(b){return{x:i.x+Math.min(1,a.sdiv(b,h.x))*(j.x-i.x),y:i.y+Math.min(1,a.sdiv(b,h.y))*(j.y-i.y)}},y=function(b){return a.isFunction(b.stop)?b.stop():!!b},z=function(){if(!y(0)){k.x=j.x-l.x,k.y=j.y-l.y;if(k.x!==0||k.y!==0){f>g&&(h=w(A,k),i.x=l.x,i.y=l.y,g=e());var b=e()-g,d=x(b),m=A.easing||a.easing.def||"linear",n={x:a.easing[m](d.x,Math.min(b,h.x),i.x,j.x-i.x,h.x),y:a.easing[m](d.y,Math.min(b,h.y),i.y,j.y-i.y,h.y)};!!A.debug&&!!window.console&&console.log(g+" Target "+j.y+" - Start "+parseInt(i.y,10)+" - Linear "+parseInt(d.y,10)+" - Eased "+parseInt(n.y,10)+" - Time "+Math.min(b,h.y)+" - Duration "+h.y),l.y=n.y,b<h.x||b<h.y?v():o=null,a.isFunction(A.tickCallback)&&A.tickCallback.call(c,b,l)}}else o=null},A=a.extend({container:null,tick:16,event:"scroll",durationX:null,durationY:null,duration:0,stop:null,step:null,easing:null,debug:!1},b);A.container=a(A.container||c),A.container.on(u),v()}})(jQuery);